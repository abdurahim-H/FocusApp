<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Visual Effects Investigation</title>
    <style>
        body {
            background: #1a1a2e;
            color: white;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .section {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .findings {
            background: rgba(0, 255, 0, 0.1);
            border-color: rgba(0, 255, 0, 0.3);
        }
        .code-block {
            background: #000;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .highlight {
            background: rgba(255, 255, 0, 0.2);
            padding: 2px 4px;
            border-radius: 3px;
        }
        iframe {
            width: 100%;
            height: 600px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
        }
        .test-buttons {
            display: flex;
            gap: 10px;
            margin: 10px 0;
            flex-wrap: wrap;
        }
        .test-btn {
            background: rgba(99, 102, 241, 0.8);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .test-btn:hover {
            background: rgba(99, 102, 241, 1);
            transform: translateY(-2px);
        }
        .effect-list {
            list-style: none;
            padding: 0;
        }
        .effect-list li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .effect-list li:last-child {
            border-bottom: none;
        }
        .critical {
            color: #ff6b6b;
            font-weight: bold;
        }
        .success {
            color: #51cf66;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Live Visual Effects Investigation</h1>
        <p>This investigation traces all background visual effects that occur during task checkbox interactions.</p>

        <div class="section findings">
            <h2>üéØ KEY FINDINGS: Background Visual Effects During Task Interaction</h2>
            
            <h3>üìå CONFIRMED VISUAL EFFECTS CASCADE:</h3>
            <p>When a task checkbox is clicked and completed, the following <span class="highlight">background visual effects</span> are triggered simultaneously:</p>
            
            <ul class="effect-list">
                <li><span class="critical">1. Golden Ring Burst Effect (WebGL)</span>
                    <div class="code-block">Location: blackhole.js - triggerTaskCompletionBurst()
Creates expanding golden ring (1.0, 1.0, 0.0) that grows from center for 3 seconds</div>
                </li>
                
                <li><span class="critical">2. Task Celebration CSS Animation</span>
                    <div class="code-block">Location: style.css - .task-celebration class
Animates: scale(1‚Üí1.05‚Üí1.1‚Üí1) + expanding shadow ring</div>
                </li>
                
                <li><span class="critical">3. Camera Shake Effect</span>
                    <div class="code-block">Location: camera-effects.js - triggerTaskCompletionShake()
Magnitude 2.0 shake reducing over 1 second</div>
                </li>
                
                <li><span class="critical">4. Black Hole Intensity Pulse</span>
                    <div class="code-block">Location: blackhole.js - updateBlackHoleEffects()
Event horizon material intensity pulses: sin(time * 2) * 0.3 + 0.7</div>
                </li>
                
                <li><span class="critical">5. Achievement Popup Animation</span>
                    <div class="code-block">Location: timer.js - showAchievement()
Slides in from right with backdrop blur</div>
                </li>
                
                <li><span class="success">6. Every 3rd Task: Time Dilation Effect</span>
                    <div class="code-block">Location: camera-effects.js + ui-effects.js
Triggers additional screen distortion and slow-motion effects</div>
                </li>
            </ul>
        </div>

        <div class="section">
            <h2>üé¨ Live Application Testing</h2>
            <p>Test the actual application to observe these effects in real-time:</p>
            
            <div class="test-buttons">
                <button class="test-btn" onclick="openMainApp()">üöÄ Open Main Application</button>
                <button class="test-btn" onclick="openInvestigation()">üî¨ Open Investigation Interface</button>
                <button class="test-btn" onclick="refreshPage()">üîÑ Refresh This Page</button>
            </div>
            
            <iframe id="appFrame" src="http://localhost:8000" title="Productivity Spaceship Application">
                <p>Application iframe could not load. Make sure the server is running on localhost:8000</p>
            </iframe>
        </div>

        <div class="section">
            <h2>‚ö° Effect Trigger Chain Analysis</h2>
            
            <h3>üîÑ Complete Execution Flow:</h3>
            <div class="code-block">
1. User clicks checkbox ‚Üí tasks.js:toggleTask(id)
2. task.completed = true ‚Üí Multiple effect triggers:
   
   ‚îú‚îÄ‚îÄ triggerTaskCompletionBurst() ‚Üí Golden WebGL ring effect
   ‚îú‚îÄ‚îÄ triggerTaskCompletionShake() ‚Üí Camera shake
   ‚îú‚îÄ‚îÄ triggerTaskCompletionUI() ‚Üí CSS animation on container
   ‚îú‚îÄ‚îÄ showAchievement() ‚Üí Achievement popup
   ‚îî‚îÄ‚îÄ Every 3rd task ‚Üí triggerTimeDilationEffect()
   
3. Background animation loop continuously updates:
   ‚îú‚îÄ‚îÄ updateBlackHoleEffects() ‚Üí Shader material updates
   ‚îú‚îÄ‚îÄ Black hole rotation speed increases with completed tasks
   ‚îî‚îÄ‚îÄ Event horizon intensity pulses in focus mode
            </div>
        </div>

        <div class="section">
            <h2>üé® Visual Layer Breakdown</h2>
            
            <h3>Layer 1: WebGL/THREE.js Background (Z-Index: 1)</h3>
            <ul class="effect-list">
                <li><strong>Golden Burst Ring:</strong> THREE.RingGeometry with additive blending</li>
                <li><strong>Black Hole System:</strong> Event horizon sphere with shader material</li>
                <li><strong>Accretion Disk:</strong> Rotating disk with productivity-based glow</li>
                <li><strong>Star Field:</strong> Background particles and cosmic elements</li>
            </ul>
            
            <h3>Layer 2: CSS Effects (Z-Index: 10-100)</h3>
            <ul class="effect-list">
                <li><strong>Task Celebration:</strong> Scale animation with expanding shadow ring</li>
                <li><strong>Container Glow:</strong> Productivity-based border glow effects</li>
                <li><strong>Time Dilation:</strong> Screen-wide filter effects for slow-motion</li>
                <li><strong>Redshift Effect:</strong> Hue rotation and sepia filters</li>
            </ul>
            
            <h3>Layer 3: UI Elements (Z-Index: 1000+)</h3>
            <ul class="effect-list">
                <li><strong>Achievement Popup:</strong> Slide-in notification with blur backdrop</li>
                <li><strong>Progress Indicators:</strong> Real-time stats updates</li>
                <li><strong>Focus Mode UI:</strong> Enhanced button particles and intensity</li>
            </ul>
        </div>

        <div class="section">
            <h2>üîß Testing Instructions</h2>
            
            <p><strong>To observe the background visual effects:</strong></p>
            <ol>
                <li>Navigate to Focus mode in the application above</li>
                <li>Add a task using the input field</li>
                <li>Click the checkbox to complete the task</li>
                <li>Watch for these simultaneous effects:
                    <ul>
                        <li><span class="critical">Golden ring expanding from black hole center</span></li>
                        <li><span class="critical">Screen shake/camera movement</span></li>
                        <li><span class="critical">Task container scaling and glow animation</span></li>
                        <li><span class="critical">Achievement notification sliding in</span></li>
                        <li><span class="critical">Black hole intensity increasing</span></li>
                    </ul>
                </li>
                <li>Complete 3 tasks to trigger the special time dilation effect</li>
            </ol>
            
            <div class="code-block">
üí° TIP: The most visible background effect is the golden ring burst that 
expands from the black hole center. This is a WebGL effect that creates 
a bright golden (RGB: 1.0, 1.0, 0.0) expanding ring for 3 seconds.
            </div>
        </div>

        <div class="section">
            <h2>üêõ Effect Debugging</h2>
            
            <p>To debug or modify these effects, check these key files:</p>
            <ul class="effect-list">
                <li><strong>/js/blackhole.js</strong> - Line 493: triggerTaskCompletionBurst() function</li>
                <li><strong>/js/tasks.js</strong> - Line 24: toggleTask() function with effect triggers</li>
                <li><strong>/css/style.css</strong> - Line 150: .task-celebration animation</li>
                <li><strong>/js/camera-effects.js</strong> - Line 54: triggerTaskCompletionShake() function</li>
                <li><strong>/js/ui-effects.js</strong> - Line 33: triggerTaskCompletionUI() function</li>
            </ul>
        </div>
    </div>

    <script>
        function openMainApp() {
            window.open('http://localhost:8000', '_blank');
        }
        
        function openInvestigation() {
            window.open('http://localhost:8000/investigation.html', '_blank');
        }
        
        function refreshPage() {
            location.reload();
        }
        
        // Auto-refresh iframe if it fails to load
        setTimeout(() => {
            const iframe = document.getElementById('appFrame');
            try {
                iframe.contentWindow.location.href;
            } catch (e) {
                console.log('Iframe blocked, likely due to CORS. Use the buttons to open in new tabs.');
            }
        }, 2000);
    </script>
</body>
</html>
