<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Button Responsiveness Test</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/themes.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/liquid-glass-buttons.css">
    <style>
        body { padding: 20px; background: var(--bg-primary); color: var(--text-primary); }
        .test-section { margin: 30px 0; padding: 20px; border: 1px solid var(--border-glass); border-radius: 10px; }
        .console-output { background: #1a1a1a; color: #00ff00; padding: 15px; border-radius: 5px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto; margin: 10px 0; }
        .status { padding: 5px 10px; border-radius: 15px; margin: 5px; display: inline-block; }
        .status.success { background: #2d5016; color: #4ade80; }
        .status.error { background: #5d1a1a; color: #ef4444; }
        .status.pending { background: #4a4a4a; color: #9ca3af; }
    </style>
</head>
<body data-theme="dark">
    <h1>üîß Complete Button Responsiveness Test</h1>
    
    <div class="test-section">
        <h3>Navigation Buttons (Main Test)</h3>
        <nav class="nav water-cosmic-container" style="position: relative; top: 0; margin: 20px auto;">
            <button class="liquid-glass-btn cosmic-glass-btn liquid-glass-btn--small nav-btn active" data-mode="home">
                <span class="btn-text">Home</span>
            </button>
            <button class="liquid-glass-btn cosmic-glass-btn liquid-glass-btn--small nav-btn" data-mode="focus">
                <span class="btn-text">Focus</span>
            </button>
            <button class="liquid-glass-btn cosmic-glass-btn liquid-glass-btn--small nav-btn" data-mode="ambient">
                <span class="btn-text">Ambient</span>
            </button>
        </nav>
        <div class="status pending" id="nav-status">Testing navigation buttons...</div>
    </div>

    <div class="test-section">
        <h3>Timer Control Buttons</h3>
        <div class="timer-controls water-cosmic-container">
            <button class="liquid-glass-btn liquid-glass-btn--primary" id="start-btn-test">
                <span class="btn-text">Start Focus</span>
            </button>
            <button class="liquid-glass-btn" id="reset-btn-test">
                <span class="btn-text">Reset</span>
            </button>
        </div>
        <div class="status pending" id="timer-status">Testing timer buttons...</div>
    </div>

    <div class="test-section">
        <h3>Ambient Control Buttons</h3>
        <div class="ambient-controls water-cosmic-container">
            <button class="liquid-glass-btn" id="rain-btn-test">
                <span class="btn-icon">üåßÔ∏è</span>
                <span class="btn-text">Rain</span>
            </button>
            <button class="liquid-glass-btn" id="ocean-btn-test">
                <span class="btn-icon">üåä</span>
                <span class="btn-text">Ocean</span>
            </button>
        </div>
        <div class="status pending" id="ambient-status">Testing ambient buttons...</div>
    </div>

    <div class="test-section">
        <h3>Settings Buttons</h3>
        <div class="settings-buttons water-cosmic-container">
            <button class="liquid-glass-btn liquid-glass-btn--primary" id="save-btn-test">
                <span class="btn-text">Save Settings</span>
            </button>
            <button class="liquid-glass-btn" id="reset-settings-btn-test">
                <span class="btn-text">Reset to Default</span>
            </button>
        </div>
        <div class="status pending" id="settings-status">Testing settings buttons...</div>
    </div>

    <div class="test-section">
        <h3>Console Output</h3>
        <div class="console-output" id="console-output">Console messages will appear here...\n</div>
        <button onclick="clearConsole()" style="margin: 10px 0; padding: 5px 10px; background: #444; color: white; border: none; border-radius: 3px;">Clear Console</button>
    </div>

    <script type="module">
        let consoleOutput = document.getElementById('console-output');
        let testResults = {
            navigation: false,
            timer: false,
            ambient: false,
            settings: false
        };

        function log(message) {
            consoleOutput.textContent += new Date().toLocaleTimeString() + ': ' + message + '\n';
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
            console.log(message);
        }

        function updateStatus(section, success) {
            const statusEl = document.getElementById(section + '-status');
            if (success) {
                statusEl.className = 'status success';
                statusEl.textContent = `‚úÖ ${section} buttons working!`;
                testResults[section] = true;
            } else {
                statusEl.className = 'status error';
                statusEl.textContent = `‚ùå ${section} buttons not responding`;
            }
            checkAllTests();
        }

        function checkAllTests() {
            const allWorking = Object.values(testResults).every(result => result);
            if (allWorking) {
                log('üéâ ALL BUTTONS ARE WORKING! Problem solved.');
            }
        }

        window.clearConsole = function() {
            consoleOutput.textContent = '';
        };

        // Test navigation buttons
        log('Setting up navigation button tests...');
        
        // Import and test the actual navigation module
        import('./js/navigation.js').then(navModule => {
            log('‚úÖ Navigation module loaded successfully');
            
            // Test if setupNavigation exists
            if (navModule.setupNavigation) {
                log('‚úÖ setupNavigation function found');
                
                // Set up navigation
                navModule.setupNavigation();
                log('‚úÖ setupNavigation called');
                
                // Test if buttons respond
                setTimeout(() => {
                    const navBtns = document.querySelectorAll('.nav-btn');
                    let navWorking = false;
                    
                    navBtns.forEach(btn => {
                        btn.addEventListener('click', () => {
                            log(`‚úÖ Navigation button "${btn.dataset.mode}" clicked successfully!`);
                            navWorking = true;
                            updateStatus('navigation', true);
                        });
                    });
                    
                    // Auto-test navigation after a delay
                    setTimeout(() => {
                        if (!navWorking) {
                            log('‚ùå Navigation buttons not responding after setup');
                            updateStatus('navigation', false);
                        }
                    }, 2000);
                }, 100);
                
            } else {
                log('‚ùå setupNavigation function not found');
                updateStatus('navigation', false);
            }
        }).catch(error => {
            log('‚ùå Error loading navigation module: ' + error.message);
            updateStatus('navigation', false);
        });

        // Test timer buttons
        document.getElementById('start-btn-test').addEventListener('click', () => {
            log('‚úÖ Start button clicked successfully!');
            updateStatus('timer', true);
        });

        document.getElementById('reset-btn-test').addEventListener('click', () => {
            log('‚úÖ Reset button clicked successfully!');
            updateStatus('timer', true);
        });

        // Test ambient buttons
        document.getElementById('rain-btn-test').addEventListener('click', () => {
            log('‚úÖ Rain button clicked successfully!');
            updateStatus('ambient', true);
        });

        document.getElementById('ocean-btn-test').addEventListener('click', () => {
            log('‚úÖ Ocean button clicked successfully!');
            updateStatus('ambient', true);
        });

        // Test settings buttons
        document.getElementById('save-btn-test').addEventListener('click', () => {
            log('‚úÖ Save button clicked successfully!');
            updateStatus('settings', true);
        });

        document.getElementById('reset-settings-btn-test').addEventListener('click', () => {
            log('‚úÖ Reset settings button clicked successfully!');
            updateStatus('settings', true);
        });

        log('All button tests initialized. Click buttons to test responsiveness.');

        // Global click listener for debugging
        document.addEventListener('click', (e) => {
            log(`Click detected on: ${e.target.tagName}.${Array.from(e.target.classList).join('.')} ${e.target.id ? '#' + e.target.id : ''}`);
        });
    </script>
</body>
</html>
